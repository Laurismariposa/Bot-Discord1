import discord
from discord.ext import commands
from bot_logic import gen_pass
# La variable intents almacena los privilegios del bot
intents = discord.Intents.default()
# Activar el privilegio de lectura de mensajes
intents.message_content = True
# Crear un bot en la variable cliente y transferirle los privilegios
bot = commands.Bot(command_prefix="$",intents=intents)

 
@bot.event
async def on_ready():
    print(f'Hemos iniciado sesi√≥n como {bot.user}')

@bot.command()
async def hello(ctx):
    await ctx.send("Hiü§ó")

@bot.command()
async def bye(ctx):
    await ctx.send("Goodbyeü•≤")

@bot.command()
async def password (ctx, numbers:int):
    await ctx.send(gen_pass(numbers))


@bot.command()
async def repeat(ctx, times: int, *, content='repeating...'): # <-- CAMBIO CLAVE AQU√ç: Se a√±ade el *
    """Repite un mensaje varias veces. Uso: $repeat <n√∫mero> [mensaje]"""

    # Si el usuario no proporciona un mensaje, se usa el valor por defecto.
    if not content:
        content = 'repeating...'

    # Se asegura que el n√∫mero no sea demasiado grande para evitar spam
    if times > 10:
        await ctx.send(f"‚ö†Ô∏è El n√∫mero de repeticiones es demasiado alto ({times}). Lo limitar√© a **10**.")
        times = 10
    
    if times <= 0:
        await ctx.send("El n√∫mero de repeticiones debe ser positivo.")
        return

    # Bucle de repetici√≥n
    for i in range(times):
        await ctx.send(content)


